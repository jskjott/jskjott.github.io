<!DOCTYPE html>

<head>
<meta charset="utf-8">

<link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css"
   integrity="sha512-Rksm5RenBEKSKFjgI3a41vrjkw4EVPlJ3+OiI65vTjIdo9brlAacEuKOiQ5OFh7cOI1bkDwLqdLw3Zg0cRJAAQ=="
   crossorigin=""/>
 <script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js"
   integrity="sha512-/Nsx9X4HebavoBvEBuyp3I7od5tA0UzAxs+j83KgC8PU0kgB4XiK4Lfe4y4cgBtaRJQEIFCW+oC506aPT2L1zw=="
   crossorigin=""></script>
 <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet-ajax/2.1.0/leaflet.ajax.min.js"></script>
</head>

<style type="text/css">

html, body {
   height: 100%;
   width: 100%;
}

#map { 
    height: 100%;
    width: 100%; 
  }
</style>

<body>

<div id="map"></div>

<script type="text/javascript">

  const map = L.map('map', {
    center: [56, 8.376672],
    zoom: 6,
    attributionControl: false,
    zoomControl:true
});

  L.tileLayer('https://api.mapbox.com/styles/v1/jskjott/cjiyipmar7t3d2sqs6bqtaiac/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1IjoianNram90dCIsImEiOiJjaml5ZW1jMjYwNTY1M3JxYjcxeW9xcWI5In0.CdyjkLwTjDhcmMVO6mr_fw').addTo(map);

  const customIcon = L.icon({
      iconUrl: 'icon.png',
      shadowUrl: 'leaf-shadow.png',

      iconSize:     [50, 50], // size of the icon
      shadowSize:   [50, 50], // size of the shadow
      iconAnchor:   [25, 25], // point of the icon which will correspond to marker's location
      shadowAnchor: [30, 30],  // the same for the shadow
      popupAnchor:  [0, -15] // point from which the popup should open relative to the iconAnchor
  });

function addGeoJSONLayer(filepath, layerName, objectName, sensitivity = 100){

  objectName = new L.GeoJSON.AJAX(filepath,{
                                  middleware:function(data){
                                      return L.geoJson(data, {
                                        onEachFeature: function (feature, layer) {
                                          layerName.addLayer(L.circle([feature.geometry.coordinates[1], feature.geometry.coordinates[0]], {radius: sensitivity * (feature.properties.mentions)}).bindPopup(feature.properties.city_name))
                                        }
                                      })
                                  }
                              });
  
}

const year_1859_to_1870 = L.layerGroup([]);
let year_1859_to_1870_object
const year_1870_to_1880 = L.layerGroup([]);
let year_1870_to_1880_object
const year_1880_to_1890 = L.layerGroup([]);
let year_1880_to_1890_object
const year_1890_to_1900 = L.layerGroup([]);
let year_1890_to_1900_object
const year_1900_to_1910 = L.layerGroup([]);
let year_1900_to_1910_object
const year_1910_to_1920 = L.layerGroup([]);
let year_1910_to_1920_object
const year_1920_to_1930 = L.layerGroup([]);
let year_1920_to_1930_object
const year_1930_to_1940 = L.layerGroup([]);
let year_1930_to_1940_object
const year_1940_to_1950 = L.layerGroup([]);
let year_1940_to_1950_object
const year_1950_to_1960 = L.layerGroup([]);
let year_1950_to_1960_object
const year_1960_to_1970 = L.layerGroup([]);
let year_1960_to_1970_object
const year_1970_to_1980 = L.layerGroup([]);
let year_1970_to_1980_object
const year_1980_to_1990 = L.layerGroup([]);
let year_1980_to_1990_object

addGeoJSONLayer("place_data/from_1859_to_1870.geojson", year_1859_to_1870, year_1859_to_1870_object)
addGeoJSONLayer("place_data/from_1870_to_1880.geojson", year_1870_to_1880, year_1870_to_1880_object)
addGeoJSONLayer("place_data/from_1880_to_1890.geojson", year_1880_to_1890, year_1880_to_1890_object)
addGeoJSONLayer("place_data/from_1890_to_1900.geojson", year_1890_to_1900, year_1890_to_1900_object)
addGeoJSONLayer("place_data/from_1900_to_1910.geojson", year_1900_to_1910, year_1900_to_1910_object)
addGeoJSONLayer("place_data/from_1910_to_1920.geojson", year_1910_to_1920, year_1910_to_1920_object)
addGeoJSONLayer("place_data/from_1920_to_1930.geojson", year_1920_to_1930, year_1920_to_1930_object)
addGeoJSONLayer("place_data/from_1930_to_1940.geojson", year_1930_to_1940, year_1930_to_1940_object)
addGeoJSONLayer("place_data/from_1940_to_1950.geojson", year_1940_to_1950, year_1940_to_1950_object)
addGeoJSONLayer("place_data/from_1950_to_1960.geojson", year_1950_to_1960, year_1950_to_1960_object)
addGeoJSONLayer("place_data/from_1960_to_1970.geojson", year_1960_to_1970, year_1960_to_1970_object)
addGeoJSONLayer("place_data/from_1970_to_1980.geojson", year_1970_to_1980, year_1970_to_1980_object)
addGeoJSONLayer("place_data/from_1980_to_1990.geojson", year_1980_to_1990, year_1980_to_1990_object)

console.log(year_1960_to_1970)

const overlayMaps = { 
                    "1859 to 1870": year_1859_to_1870,
                    "1870 to 1880": year_1870_to_1880,
                    "1880 to 1890": year_1880_to_1890,
                    "1890 to 1900": year_1890_to_1900,
                    "1900 to 1910": year_1900_to_1910,
                    "1910 to 1920": year_1910_to_1920,
                    "1920 to 1930": year_1920_to_1930,
                    "1930 to 1940": year_1930_to_1940,
                    "1940 to 1950": year_1940_to_1950,
                    "1950 to 1960": year_1950_to_1960,
                    "1960 to 1970": year_1960_to_1970,
                    "1970 to 1980": year_1970_to_1980,
                    "1980 to 1990": year_1980_to_1990
                  };

L.control.layers(null, overlayMaps,{collapsed:false}).addTo(map);

year_1859_to_1870.addTo(map)

var multipolygonStyle = {
        "color": "#ff7800",
        "weight": 2,
        "opacity": 0.3
    };

L.control.scale().addTo(map)

    //map.dragging.disable();
    //map.touchZoom.disable();
    //map.doubleClickZoom.disable();
    //map.scrollWheelZoom.disable();

// Add the style to your layer    
var geojson = new L.GeoJSON.AJAX("DNK.geojson",{
         style:multipolygonStyle});
geojson.addTo(map)

var geojson = new L.GeoJSON.AJAX("NOR.geojson",{
         style:multipolygonStyle});
geojson.addTo(map)

var geojson = new L.GeoJSON.AJAX("FRO.geojson",{
         style:multipolygonStyle});
geojson.addTo(map)

var geojson = new L.GeoJSON.AJAX("GRL.geojson",{
         style:multipolygonStyle});
geojson.addTo(map)

var geojson = new L.GeoJSON.AJAX("ISL.geojson",{
         style:multipolygonStyle});
geojson.addTo(map)

</script>

</body>



